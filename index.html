<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>List Maker</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link href="css/all.css" rel="stylesheet">
    <link href="css/index.css" rel="stylesheet">
</head>

<body>
    <h1>List maker</h1>
    <form>
        <h2>New item: </h2>
        <input type="text" id="new-item">
        <input type="submit" value="Add">
    </form>
    <button id="save">Save List</button>
    <ol></ol>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script>
        $('form').submit(function(e) {
            e.preventDefault();
            AddRow($('#new-item').val());
        });

        function AddRow(s) {
            let li = $('<li></li>');

            let row = $('<div class="row"></div>');

            let buttonDiv = $('<div class="up-down-buttons"></div>');
            let upButton = $('<button class="up-button"><i class="fas fa-arrow-up"></i></div>');
            upButton.click(function() {
                li.insertBefore(li.prev());
            });
            buttonDiv.append(upButton);
            let downButton = $('<button class="down-button"><i class="fas fa-arrow-down"></i></div>');
            downButton.click(function() {
                li.insertAfter(li.next());
            });
            buttonDiv.append(downButton);

            let text = $('<p>' + s + '</p>');
            $('#new-item').val('');

            let deleteButton = $('<button class="delete-button"><i class="fas fa-trash"></i></button>');
            deleteButton.click(function() {
                li.remove();
            });

            row.append(buttonDiv, text, deleteButton);
            li.append(row);

            $('ol').append(li);
        }
    </script>

    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-app.js"></script>
    <!-- Database CDN -->
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-database.js"></script>
    <!-- Authentication CDN -->
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-auth.js"></script>
    <!--Cloud functions CDN-->
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-functions.js"></script>

    <script>
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyCpazfz92YtB4GJF8FstlaISQpESLiqp-Q",
            authDomain: "list-project-72696.firebaseapp.com",
            databaseURL: "https://list-project-72696-default-rtdb.firebaseio.com",
            projectId: "list-project-72696",
            storageBucket: "list-project-72696.appspot.com",
            messagingSenderId: "898539254457",
            appId: "1:898539254457:web:ae8fa9768d1af21083a168",
            measurementId: "G-08SCE11N4X"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        let database = firebase.database();
        let auth = firebase.auth();
    </script>
    <script>
        $('#save').click(function() {
            let list = [];
            $("li").each(function() { list.push($(this).text()) });
            database.ref("jonah").set(list);
        });

        $(document).ready(function() {
            database.ref("jonah").get().then(function(s) {
                var data = s.val();
                for (var i = 0; i < data.length; i++) {
                    AddRow(data[i]);
                }
            });
        });
    </script>
</body>
</html>